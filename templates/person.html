{% extends "page.html" %}

{% import "macros.html" as macros %}

{% block content %}
<script src="https://kit.fontawesome.com/ebcc86461e.js" crossorigin="anonymous"></script>

<style>
  main div.info {
    display: grid;
    grid-template-columns: 1fr 3fr;
    column-gap: 2em;
    margin-bottom: 1em;
  }
</style>
<main>
  <div class="info">
    <div>
      {{ macros::photo(url=page.extra.photo) }}
    </div>
    <div>
      <h2>{{ page.title }}</h2>
      {{ page.description }}
      <hr>
      {{ macros::contacts(contacts=page.extra.contacts) }}
      {{ macros::links(links=page.taxonomies) }}
    </div>
  </div>
  <div class="backlinks">
    {% set person = page.path | trim_end_matches(pat="/") | trim_start_matches(pat="/") %}
    {% set term = get_taxonomy_term(kind="during_the_pleasure_of", term=person, required=false) %}
    {% if term %}
    <b>During their pleasure</b>
    <ul>
    {% for item in term.pages %}
      <li>{{ macros::link_person(page=item) }}</li>
    {% endfor %}
    </ul>
    {% endif %}
  </div>
</main>

{% endblock content %}